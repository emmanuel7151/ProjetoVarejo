@model ProjetoVarejo.Models.Pedido
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.8/vue.js"></script>
<script type="text/javascript">
    
    var teste = @Html.Raw(ViewBag.teste);
    var countries = new Array;
    $.each(teste, function (index, value) { countries.push(value.Text) })

</script>

@*@{
        ViewData["Title"] = "Create";
    }

    <h2>Create</h2>

    <h4>Pedido</h4>
    <hr />
    <div class="row">
        <div class="col-md-4">
            <form asp-action="Create">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-group">
                    <label asp-for="ClienteId" class="control-label"></label>
                    <select asp-for="ClienteId" class="form-control" asp-items="ViewBag.ClienteId"></select>
                </div>
                <div class="form-group">
                    <label asp-for="VendedorId" class="control-label"></label>
                    <select asp-for="VendedorId" class="form-control" asp-items="ViewBag.VendedorId"></select>
                </div>
                <div class="form-group">
                    <label asp-for="ValorCompra" class="control-label"></label>
                    <input asp-for="ValorCompra" class="form-control" />
                    <span asp-validation-for="ValorCompra" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Desconto" class="control-label"></label>
                    <input asp-for="Desconto" class="form-control" />
                    <span asp-validation-for="Desconto" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="ValorTotal" class="control-label"></label>
                    <input asp-for="ValorTotal" class="form-control" />
                    <span asp-validation-for="ValorTotal" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="CupomDeDesconto" class="control-label"></label>
                    <input asp-for="CupomDeDesconto" class="form-control" />
                    <span asp-validation-for="CupomDeDesconto" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="MetodoDePagamento" class="control-label"></label>
                    <input asp-for="MetodoDePagamento" class="form-control" />
                    <span asp-validation-for="MetodoDePagamento" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="DataCompra" class="control-label"></label>
                    <input asp-for="DataCompra" class="form-control" />
                    <span asp-validation-for="DataCompra" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="DataVencimento" class="control-label"></label>
                    <input asp-for="DataVencimento" class="form-control" />
                    <span asp-validation-for="DataVencimento" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="TaxaDeJuros" class="control-label"></label>
                    <input asp-for="TaxaDeJuros" class="form-control" />
                    <span asp-validation-for="TaxaDeJuros" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="DataPagamento" class="control-label"></label>
                    <input asp-for="DataPagamento" class="form-control" />
                    <span asp-validation-for="DataPagamento" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <input type="submit" value="Create" class="btn btn-default" />
                </div>
            </form>
        </div>
    </div>

    <div>
        <a asp-action="Index">Back to List</a>
    </div>*@

<div class="main-content">
    <div class="section__content section__content--p30">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-7">
                    <!-- INICIO DO CONTEUDO-->
                    <form autocomplete="off" action="/action_page.php">
                        <div class="form-row">
                            <div class="col-5">
                                <div class="form-group has-success">
                                    @*<label for="select" class=" control-label mb-1">Vendedor</label>
                                        <select name="select" id="select" class="form-control">
                                            <option value="0">Selecione o vendedor</option>
                                            <option value="1">Fellipe Prates</option>
                                            <option value="2">Joaozinho</option>
                                            <option value="3">Fernanda</option>
                                        </select>*@
                                    <label asp-for="VendedorId" class="control-label">Codigo Vendedor</label>
                                    <select asp-for="VendedorId" class="form-control" asp-items="ViewBag.VendedorID"></select>
                                </div>
                            </div>
                            <div class="col-5">
                                <div class="form-group has-success">
                                    <label for="cc-name" class="control-label mb-1">CPF do Cliente</label>
                                    <input id="cc-name" name="cc-name" placeholder="123.456.789-00" type="text" class="form-control cc-name valid" data-val="true"
                                           maxlength="14" data-val-required="Entre com o CPF do cliente" autocomplete="cc-name" aria-required="true" aria-invalid="false"
                                           aria-describedby="cc-name-error" onkeypress="mascara(this,cpf)">
                                    <span class="help-block field-validation-valid" data-valmsg-for="cc-name" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col-6">
                                <div class="form-group has-success autocomplete">
                                    <label for="myInput" class="control-label mb-1">Nome do Produto</label>
                                    <input id="myInput" type="text" name="myCountry" placeholder="Produto" class="form-control">
                                </div>
                            </div>
                            <div class="col-4">
                                <div class="form-group">
                                    <label for="cc-exp" class="control-label mb-1">Quantidade</label>
                                    <input id="cc-exp" name="cc-exp" type="text" class="form-control cc-exp" value="" maxlength="3" data-val="true" data-val-required="Digite a quantidade"
                                           data-val-cc-exp="Digite a quantidade" placeholder="5" autocomplete="cc-exp" onkeypress="mascara(this,soNumeros)">
                                    <span class="help-block" data-valmsg-for="cc-exp" data-valmsg-replace="true"></span>
                                </div>
                            </div>

                        </div>

                        <div class="form-row">
                            <div class="col-10">
                                <div class="form-group">
                                    <label for="cc-exp" class="control-label mb-1">Preço do Produto</label>
                                    <input id="cc-exp" name="cc-exp" type="text" class="form-control cc-exp" value="" maxlength="8" data-val="true" data-val-required=""
                                           data-val-cc-exp="Digite o preço da venda" placeholder="R$ 00,00" autocomplete="cc-exp" onkeypress="mascara(this,moeda)">
                                    <span class="help-block" data-valmsg-for="cc-exp" data-valmsg-replace="true"></span>
                                </div>
                            </div>


                            <div class="col-10">
                                <div class="form-group">
                                    <label for="cc-exp" class="control-label mb-1">Cupom</label>
                                    <input id="cc-exp" name="cc-exp" type="text" class="form-control cc-exp" value="" data-val="true" data-val-required="Digite o codigo cupom"
                                           data-val-cc-exp="Digite o codigo cupom" placeholder="Código Cupom" autocomplete="cc-exp">
                                    <span class="help-block" data-valmsg-for="cc-exp" data-valmsg-replace="true"></span>
                                </div>
                            </div>





                        </div>


                        <div class="form-row">
                            <div class="col-md-5">
                                <div class="form-group">
                                    <label for="cc-exp" class="control-label mb-1">Valor Total</label>
                                    <input id="cc-exp" name="cc-exp" type="tel" class="form-control cc-exp" maxlength="8" value="" data-val="true" data-val-required="Mostra o valor total"
                                           data-val-cc-exp="Mostra o valor total" placeholder="R$ 00,00" autocomplete="cc-exp" onkeypress="mascara(this,moeda)">
                                    <span class="help-block" data-valmsg-for="cc-exp" data-valmsg-replace="true"></span>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <label for="x_card_code" class="control-label mb-1">Desconto</label>
                                <div class="input-group">
                                    <input id="x_card_code" name="x_card_code" type="tel" maxlength="3" placeholder="100%" class="form-control cc-cvc" value=""
                                           data-val="true" data-val-required="Digite o desconto" data-val-cc-cvc="Digite o desconto" autocomplete="off"
                                           onkeypress="mascara(this,soNumeros)">

                                </div>
                            </div>
                            <br>




                            <div class="col-3">
                                <div class="form-group ">
                                    <button type="button" onclick="carrinhoDeCompras()" class="btn btn-primary btn-lg">
                                        <i class="fa fa-plus-circle"></i>&nbsp;Adicionar
                                    </button>
                                    <br><br>
                                    <button type="button" class="btn btn-primary btn-lg" style="background: brown">
                                        <i class="fa fa-plus-circle"></i>&nbsp;Concluir Venda
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="col-5">
                    <br>
                    <div class="au-card au-card--bg-blue au-card-top-countries">
                        <div class="au-card-inner">
                            <div class="table-responsive" id="meuCarrinho">

                                <table class="table table-top-countries">
                                    <tbody>
                                        <tr v-for="produto in produtos">
                                            <td>{{produto.nome}}</td>
                                            <td>{{produto.preco}}</td>
                                        </tr>
                                    </tbody>



                                </table>


                                <hr class="hr_class">
                                <table class="table table-top-countries" id="meuCarrinho">
                                    <tbody>
                                        <tr>
                                            <td class="precoTotal">
                                                <b>Total</b>
                                            </td>
                                            <td class="text-right precoTotal">
                                                <b>{{subTotal}}</b>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
            </div>
        </div>
    </div>
</div>
<br>




<script>
    var carrinho = new Vue({
        el: '#meuCarrinho',
        data: {
            produtos: [{
                nome: 'Nike',
                preco: 350.00
            },
            {
                nome: 'Calça Adidas',
                preco: 150.00
            },
            {
                nome: 'Meia',
                preco: 20.00
            },
            {
                nome: 'Pulseira',
                preco: 10.00
            }
            ],
            carrinho: [],
            subTotal: 0.00,
            protudoSelecionado: "",
        },
        watch: {
            carrinho: function () {
                this.atualizarSubTotal();
            }
        },
        methods: {
            atualizarSubTotal: function () {
                var qtd = this.carrinho.length;
                var total = 0;
                for (var i = 0; i < qtd; i++) {
                    total = total + this.carrinho[i].preco;
                }
                this.subTotal = total;
            },
            comprar: function (carro) {
                this.carrinho.push(carro);
            },
        },
    })
</script>



@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
